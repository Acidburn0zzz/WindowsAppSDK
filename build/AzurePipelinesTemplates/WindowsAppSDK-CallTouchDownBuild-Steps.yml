parameters:
- name: ResourceFilePath
  type: string
  default: ""
- name: GitAction
  type: string
  default: 'None'
  values:
  - 'None'
  - 'COMMIT'

steps:
- checkout: self
  persistCredentials: true

# This is needed to avoid credentials errors for later in the TDBuild Task
- script: |
    git config --global user.email "you@example.com"
    git config --global user.name "Your Name"

- task: TouchdownBuildTask@1
  inputs:
    environment: 'PRODEXT'
    teamId: $(TdBuildTeamIDVSIX)
    authType: 'OAuth'
    authId: $(TdBuildAuthID)
    authKey: $(TdBuildToken)
    localizationTarget: true
    isPreview: false
    resourceFilePath: ${{ parameters.ResourceFilePath }}
    appendRelativeDir: true
    cultureMappingType: 'None'
    gitAction: ${{ parameters.GitAction }}
